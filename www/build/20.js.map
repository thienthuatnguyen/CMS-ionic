{"version":3,"sources":["../../src/pages/reservation/reservation.module.ts","../../src/pages/reservation/reservation.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { ReservationPage } from './reservation';\n\n@NgModule({\n  declarations: [\n    ReservationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReservationPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    ReservationPage\n  ]\n})\nexport class ReservationPageModule { }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservation/reservation.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport moment from 'moment';\nimport { Item } from '../../models/item';\nimport { Reservation, ReservationModel } from '../../models/reservation/reservation.model';\nimport { ReservationTimeSlotModel } from '../../models/reservation/reservation.timeslot.model';\nimport { Util, VehicleItems } from '../../providers';\nimport { _ } from 'underscore';\nimport { AlertController } from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Vehicle } from '../../models/vehicle/vehicle.model';\nimport { ReservationService } from '../../services/reservation.service';\nimport { Config } from '../../app/app.config';\nimport { VehicleService } from '../../services/vehicle.service';\nimport { IvtStorageService, IvtSecurityService } from '@ivt/security';\nimport { ToastService } from '../../services/toast.service';\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'reservation.html'\n})\nexport class ReservationPage {\n  maxYear = (new Date()).getFullYear() + 1;\n  private reservationObj: any = {\n    consultantUserId: null,\n    timeSlot: [],\n    reservationStatus: null\n  };\n  currentItems: any = [];\n  reserveDate: any;\n  reservation: Reservation;\n  reservationTimeSlots: ReservationTimeSlotModel[];\n  vehicleList: Vehicle[];\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    private alertCtrl: AlertController,\n    private translate: TranslateService,\n    private util: Util,\n    private service: ReservationService,\n    private vehicleService: VehicleService,\n    private toastSvc: ToastService,\n    private navParam: NavParams,\n    private securityService: IvtSecurityService) {\n    let userInfor = this.securityService.getUser();\n    this.reservationObj.consultantUserId = userInfor.id; \n    this.init();\n  }\n  private init(){\n    this.reservationObj.timeSlot = [];\n    this.reservationObj.reservationStatus = null;\n    let reservationFromServer : ReservationModel;\n    if (this.navParam.data.item) {\n      reservationFromServer = this.navParam.data.item;\n      this.reservation = this.util.transformToReservation(reservationFromServer);\n      this.reservation.appointmentDate = moment(this.reservation.appointmentDate).locale(Config.moment.locale).format(Config.date.YYYYMMDD)\n      this.reservationObj.reservationStatus = reservationFromServer.applicationStatusEnum; \n    }\n    else {\n      this.reservation = new Reservation();\n      this.reservation.consultantUserId = this.reservationObj.consultantUserId\n      this.reservation.appointmentDate = moment().locale(Config.moment.locale).format(Config.date.YYYYMMDD)\n    }\n  }\n  ionViewWillEnter() {\n    this.init();\n    this.getAvailableReservationTimeSlots();\n    this.getVehicle();\n    this.setCurrentReservationTimeSlot();\n  }\n  private getVehicle() {\n    this.vehicleService.search().subscribe(result => {\n      this.vehicleList = result;\n    }, fail => {\n      this.toastSvc.error(fail.message);\n    })\n  }\n\n  selectTimeSlot(item: ReservationTimeSlotModel, index: number) {\n    if (this.reservationObj.timeSlot.length == 0) {\n      this.reservationObj.timeSlot.push({ timeSelected: item.timeInHHMM, id: index })\n      item.timeSelected = true;\n    }\n    else {\n      let result = _.where(this.reservationObj.timeSlot, { id: index })\n      if (result.length == 0) {\n        if (this.reservationObj.timeSlot[0].id - index == 1 || this.reservationObj.timeSlot[this.reservationObj.timeSlot.length - 1].id - index == -1) {\n          this.reservationObj.timeSlot.push({ timeSelected: item.timeInHHMM, id: index })\n          item.timeSelected = true;\n          this.reservationObj.timeSlot = _.sortBy(this.reservationObj.timeSlot, 'id');\n          console.log(this.reservationObj.timeSlot);\n        }\n        else {\n          this.toastSvc.error(this.translate.instant('reservation.this_time_slot_cannot_selected'));\n        }\n      }\n      else {\n        // remove time slot\n        if (this.reservationObj.timeSlot[0].id === index) {\n          this.reservationTimeSlots[index].timeSelected = false;\n          this.reservationObj.timeSlot.splice(0, 1);\n        } \n        else if (this.reservationObj.timeSlot[this.reservationObj.timeSlot.length - 1].id === index) {\n          this.reservationTimeSlots[index].timeSelected = false;\n          this.reservationObj.timeSlot.pop();\n        }\n        else {\n          this.reservationObj.timeSlot = [];\n          this.reservationTimeSlots.forEach((timeSlot: ReservationTimeSlotModel) => {\n            timeSlot.timeSelected = false;\n          })\n        }        \n      }\n    }\n  }\n  changeReservationDate(reservationDate: string) {\n    if (this.reservation.vehicleId) {\n      this.resetAvaillableTimeSlot();\n    }\n  }\n\n  changeVehicle(vehicleId: number) {\n    if (this.reservation.appointmentDate) {\n      this.resetAvaillableTimeSlot();\n    }\n  }\n  private resetAvaillableTimeSlot(){\n    this.reservation.appointmentFromTime = null;\n    this.reservation.appointmentToTime = null;\n    this.getAvailableReservationTimeSlots()\n  }\n  private getAvailableReservationTimeSlots() {\n    let searchCriteria = {\n      applicationId: this.reservation.id || null,\n      consultantUserId: this.reservationObj.consultantUserId,\n      vehicleId: this.reservation.vehicleId || null,\n      appointmentDateLocal: this.reservation.appointmentDate\n    }\n    this.service.getAvailableReservationTimeSlots(searchCriteria).subscribe((result: ReservationTimeSlotModel[]) => {\n      this.reservationTimeSlots = result;\n      this.setCurrentReservationTimeSlot();\n    }, fail => {\n      // to do later\n    })\n  }\n\n  setCurrentReservationTimeSlot() {\n    this.reservationObj.timeSlot = [];\n    if(this.reservationTimeSlots){\n    this.reservationTimeSlots.forEach((item: ReservationTimeSlotModel, index: number) => {\n      if(item.timeInHHMM >= this.reservation.appointmentFromTime && item.timeInHHMM <= this.reservation.appointmentToTime)  {\n        item.timeSelected = true;\n        this.reservationObj.timeSlot.push({ timeSelected: item.timeInHHMM, id: index })\n      }\n    })\n  }\n  }\n\n  private getTimeSlotIndex(list: ReservationTimeSlotModel[], timeSlot: string) {\n    for (let i = 0; i < list.length; i++) {\n      if (list[i].timeInHHMM == timeSlot)\n        return i;\n    }\n    return -1;\n  }\n\n  isDisabled(item: ReservationTimeSlotModel) : boolean{\n    return ((this.reservation.vehicleId === 0) || item.assignedToMe || item.assignedToOtherConsultantUser || item.assignedToThisVehicle)\n  }\n\n  isSelectedTimeSlot(item: ReservationTimeSlotModel) {\n    return (item.timeInHHMM >= this.reservation.appointmentFromTime && item.timeInHHMM <= this.reservation.appointmentToTime)\n  }\n\n  isOwnReservation(): boolean {\n    if (this.reservation.consultantUserId)\n      return this.reservation.consultantUserId == this.reservationObj.consultantUserId\n    return true;\n  }\n  isDoneReservation (): boolean{\n    return this.util.isDoneReservation(this.reservationObj.reservationStatus);\n  }\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  cancel() {\n    this.navCtrl.parent.select(2);\n  }\n\n  save() {\n    let title = this.translate.instant('YOUR_RESERVATION_HAS_BEEN_CHANGED_DO_YOU_WANT_TO_SAVE_IT');\n    if (this.reservation.id === undefined)\n      title = this.translate.instant('ARE_YOU_SURE_YOU_WANT_TO_MAKE_A_RESERVATION');\n    let confirm = this.alertCtrl.create({\n      title: title,\n      buttons: [\n        {\n          text: this.translate.instant('CANCEL_BUTTON')\n        }, {\n          text: this.translate.instant('OK_BUTTON'),\n          handler: () => {\n            let timeSlots = this.reservationObj.timeSlot;\n\n            if(timeSlots.length>0){\n              this.reservation.appointmentFromTime = timeSlots[0].timeSelected;\n              this.reservation.appointmentToTime = timeSlots[timeSlots.length - 1].timeSelected;\n            }\n            else {\n              this.reservation.appointmentFromTime = null;\n              this.reservation.appointmentToTime = null;\n            }\n            this.service.save(this.reservation).subscribe(success => {\n              this.toastSvc.success(this.translate.instant('YOUR_RESERVATION_WAS_MADE_OR_WAS_CHANGED_SUCCESSFULLY'));\n              this.navCtrl.parent.select(2);\n            }, fail => {\n              this.toastSvc.error(fail.message);\n            })\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  cancelReservation() {\n    let confirm = this.alertCtrl.create({\n      title: this.translate.instant('ARE_YOUR_SURE_YOU_WANT_TO_CANCEL_THIS_RESERVATION'),\n      buttons: [\n        {\n          text: this.translate.instant('CANCEL_BUTTON'),\n        }, {\n          text: this.translate.instant('OK_BUTTON'),\n          handler: () => {\n            this.service.cancel({ id: this.reservation.id }).subscribe(success => {\n              this.toastSvc.error(this.translate.instant('YOUR_RESERVATION_WAS_CANCELED_SUCCESSFULLY'));\n              this.navCtrl.parent.select(2);\n            }, fail => {\n              this.toastSvc.error(fail.message);\n            });\n\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservation/reservation.ts"],"sourceRoot":""}