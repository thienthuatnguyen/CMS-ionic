{"version":3,"sources":["../../src/pages/reservation-list/reservation-list.module.ts","../../src/pages/reservation-list/reservation-list.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule, Pipe } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ReservationListPage } from './reservation-list';\n\n@NgModule({\n  declarations: [\n    ReservationListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReservationListPage),\n    TranslateModule.forChild()\n\n  ],\n})\nexport class ReservationListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservation-list/reservation-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, ViewController, ModalController } from 'ionic-angular';\nimport { _ } from 'underscore';\nimport { Util } from '../../providers';\nimport { ReservationPage } from \"../reservation/reservation\";\nimport { TestDriveReadyPage } from \"../test-drive-ready/test-drive-ready\";\nimport { MainPage } from \"../index\";\nimport { ReservationService } from '../../services/reservation.service';\nimport { ReservationModel } from '../../models/reservation/reservation.model';\nimport moment from 'moment';\nimport { Config } from '../../app/app.config';\nimport { UserInfoModel } from '../../models/userInfo.model';\nimport { IvtStorageService, IvtSecurityService } from '@ivt/security';\nimport { ToastService } from '../../services/toast.service';\nimport { TranslateService } from '@ngx-translate/core/src/translate.service';\nimport { AppSettingModel } from '../../models/config/app.setting.model';\nimport { DriveShootingPage } from '../../pages/drive-shooting/drive-shooting';\nimport { CameraService } from '../../services/camera.service';\nimport { FileService } from '../../services/file.service';\nimport { VehicleOdometerModel } from '../../models/VehicleOdometer.model';\nimport { VehicleOdometerService } from '../../services/vehicle.odometer.service';\nimport { Subject } from 'rxjs/Subject';\nimport { Subscription } from 'rxjs/Subscription';\nimport { NotificationService } from '../../services/notification.service';\n@IonicPage()\n@Component({\n  selector: 'page-reservation-list',\n  templateUrl: 'reservation-list.html'\n})\nexport class ReservationListPage {\n  private currentUser: boolean = false;\n  private userId: any;\n  private list: any = [];\n  private reservationList: any = [];\n  private params: any;\n  private validateMessage: string;\n  private appSetting: AppSettingModel;\n  today: Date;\n  resultList: any = [];\n  displayDateFormat = Config.date.displayShortTime;\n  private subscription: Subscription;\n  private vhcSubscription: Subscription;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private viewCtrl: ViewController,\n    private service: ReservationService,\n    private util: Util,\n    private translateService: TranslateService,\n    private toastService: ToastService,\n    private securityService: IvtSecurityService,\n    private storeage: IvtStorageService,\n    private modalCtrl: ModalController,\n    private camera: CameraService,\n    private fileSvc: FileService,\n    private vehicleOdometerService: VehicleOdometerService,\n    private notificationService: NotificationService\n  ) {\n    let userInfor = this.securityService.getUser();\n    this.userId = userInfor.id;\n\n    this.today = moment(moment().format(Config.date.YYYYMMDD), Config.date.YYYYMMDD).toDate();\n    this.translateService.get('reservation.you_can_only_proceed_with_your_reservation').subscribe((value) => {\n      this.validateMessage = value;\n    })\n    this.getAppSetting();\n  }\n\n  private getReservationList(searchCriteria: any) {\n    this.service.getReservationList(searchCriteria).subscribe((reservations: ReservationModel[]) => {\n      this.list = this.util.transformToReservationList(reservations);\n      this.resultList = this.util.transformToGroupBy(this.list, 'appointmentDateLocal');\n    }, fail => {\n      // to do will show error message \n    });\n  }\n\n  private getAppSetting() {\n    this.appSetting = this.storeage.get(Config.AppSetting);\n  }\n\n  ionViewDidEnter() {\n    this.params = {\n      appointmentFromDateLocal: moment()\n    }\n    this.getReservationList(this.params);\n  }\n\n  toggleUser() {\n    this.currentUser = !this.currentUser;\n    let userItems = this.list;\n    if (this.currentUser)\n      userItems = _.where(this.list, { consultantUserId: this.userId });\n    this.resultList = this.util.transformToGroupBy(userItems, 'appointmentDateLocal');\n  }\n\n  changeDate(selectedDate) {\n    this.params = {\n      appointmentFromDateLocal: moment(selectedDate),\n      appointmentToDateLocal: moment(selectedDate)\n    }\n    this.getReservationList(this.params);\n  }\n\n  showCreateDocument(applicationStatusEnum: any) {\n    return Config.reservation.createDocument.indexOf(applicationStatusEnum) >= 0\n  }\n\n  showEditDocument(applicationStatusEnum: any) {\n    return Config.reservation.editDocument.indexOf(applicationStatusEnum) < 0\n  }\n\n  showStartDriver(applicationStatusEnum: any) {\n    return Config.reservation.startDrive.indexOf(applicationStatusEnum) >= 0\n  }\n  /**\n   * Perform a service for the proper items.\n   */\n  searchByKeyWord(ev) {\n    if (ev.target.value === undefined)\n      this.resultList = this.util.transformToGroupBy(this.list, 'appointmentDateLocal');\n    else {\n      var result = _.filter(this.list, item => {\n        return (\n          item.customerFullName.toLowerCase().indexOf(ev.target.value.toLowerCase()) >= 0\n          || item.vehicleDisplayName.toLowerCase().indexOf(ev.target.value.toLowerCase()) >= 0\n          || item.consultantUserName.toLowerCase().indexOf(ev.target.value.toLowerCase()) >= 0)\n      });\n      this.resultList = this.util.transformToGroupBy(result, 'appointmentDateLocal');\n    }\n  }\n\n\n  /**\n   * Navigate to the detail page for this item.\n   */\n  editReservation(item: ReservationModel) {\n    this.navCtrl.push('ReservationPage', {\n      item: item\n    });\n  }\n\n  updateDocument(item: ReservationModel) {\n    this.navCtrl.push('DocumentPage', {\n      item: item\n    });\n  }\n\n  private openVhcPage(vehicleId: number) {\n    let profileModal = this.modalCtrl.create('VehicleHealthCheckPage', {\n      vehicleId: vehicleId,\n      BeforeTestDrive: true,\n      page: 'reservation-list'\n    }, {\n        cssClass: 'full-modal'\n      });\n    profileModal.present();\n  }\n  private async takeOdometer(applicationId: number) {\n    let profileModal = this.modalCtrl.create('DriveShootingPage',\n      {\n        applicationId: applicationId,\n        BeforeTestDrive: true,\n        pageType: 'odometer',\n        page: 'reservation-list'\n      }, {\n        cssClass: 'full-modal'\n      });\n    profileModal.present();\n  }\n  private startTestDrive(item: ReservationModel) {\n    this.navCtrl.setRoot('TestDriveReadyPage', {\n      item: item\n    });\n  }\n\n  private startDriveBasedOnSetting(item: ReservationModel) {\n    //this.appSetting.smartTestDriveSetting.tenantSide.performVhcBeforeAndAfterTestDrive = false;\n    //this.appSetting.smartTestDriveSetting.tenantSide.performTakingOdometerPhotoBeforeAndAfterTestDrive = false;\n    if (this.appSetting.smartTestDriveSetting.tenantSide.performVhcBeforeAndAfterTestDrive) {\n      this.openVhcPage(item.vehicleId);\n    }\n    else if (this.appSetting.smartTestDriveSetting.tenantSide.performTakingOdometerPhotoBeforeAndAfterTestDrive) {\n      this.takeOdometer(item.id);\n    }\n    else {\n      this.startTestDrive(item);\n    }\n    this.subscribe(item);\n  }\n  \n  private subscribe(item: ReservationModel) {\n    if (this.appSetting.smartTestDriveSetting.tenantSide.performVhcBeforeAndAfterTestDrive) {\n      if (this.vhcSubscription == undefined || this.vhcSubscription.closed == true) {\n        this.vhcSubscription = this.notificationService.updateBeforeVehicleHealthCheck.subscribe(result => {\n          this.vhcSubscription.unsubscribe();\n          if (this.appSetting.smartTestDriveSetting.tenantSide.performTakingOdometerPhotoBeforeAndAfterTestDrive) {\n            this.takeOdometer(item.id);\n          }\n          else {\n            this.startTestDrive(item);\n          }\n        })\n      }\n    }\n    if (this.appSetting.smartTestDriveSetting.tenantSide.performTakingOdometerPhotoBeforeAndAfterTestDrive) {\n      if (this.subscription == undefined || this.subscription.closed == true) {\n        this.subscription = this.notificationService.takeOdometerBeforeDrive.subscribe(result => {\n          this.subscription.unsubscribe();\n          this.startTestDrive(item);\n        })\n      }\n    }\n  }\n\n  openTestDriveReady(item: ReservationModel) {\n    if (this.isOwnReservation(item)) {\n      this.startDriveBasedOnSetting(item);\n    }\n    else {\n      this.toastService.error(this.validateMessage);\n    }\n  }\n  isOwnReservation(item): boolean {\n    if (item.consultantUserId)\n      return item.consultantUserId == this.userId\n    return false;\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  // private generateUniqueFileName(): string {\n  //   return new Date().getTime().toString() + this.fileSvc.FILE_EXTENSION;\n  // }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservation-list/reservation-list.ts"],"sourceRoot":""}