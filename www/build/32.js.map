{"version":3,"sources":["../../src/pages/change-profile/change-profile.module.ts","../../src/pages/change-profile/change-profile.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChangeProfilePage } from './change-profile';\n\n@NgModule({\n  declarations: [\n    ChangeProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChangeProfilePage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    ChangeProfilePage\n  ]\n})\nexport class ChangeProfilePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/change-profile/change-profile.module.ts","import { Component } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\n\nimport { Util } from '../../providers';\nimport { CameraService } from '../../services/camera.service';\nimport { Picture } from \"../../models/picture.model\";\nimport { FileService } from '../../services/file.service';\nimport { User, IvtSecurityService } from '@ivt/security';\nimport { SecurityService } from '../../security/security.service';\nimport { ToastService } from '../../services/toast.service';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@IonicPage()\n@Component({\n  selector: 'page-change-profile',\n  templateUrl: 'change-profile.html'\n})\nexport class ChangeProfilePage {\n  userInfor: User;\n  Pictures: any;\n  constructor(public navCtrl: NavController,\n    public formBuilder: FormBuilder,\n    public navParams: NavParams,\n    public translate: TranslateService,\n    private alertCtrl: AlertController,\n    private toastCtrl: ToastController,\n    private camera: CameraService,\n    private fileSvc: FileService,\n    private util: Util,\n    private ivtSecurityService: IvtSecurityService,\n    private toastSvc: ToastService,\n    public domSanitizer: DomSanitizer,\n\n  ) {\n  }\n  changeAvatar() {\n\n    this.camera.getPicture(200, 200, true).then(\n      _base64 => {\n        let picture = new Picture();\n        picture.url = _base64;\n\n        this.Pictures = picture;\n      }\n    )\n  }\n  ionViewDidEnter() {\n    this.userInfor = this.ivtSecurityService.getUser()\n    this.Pictures = new Picture();\n    this.Pictures.id = this.userInfor.pictureID;\n    this.fileSvc.download(this.Pictures.id).then(\n      url => this.Pictures.url = url\n    )\n\n  }\n  submitSave() {\n    this.fileSvc.uploadProfile(this.Pictures.url, { fileName: this.generateUniqueFileName() }).then(\n      _id => {\n        this.Pictures.id = _id;\n        let _service: any = this.ivtSecurityService;\n        let user = this.ivtSecurityService.getUser();\n        user.pictureID = _id;\n        (_service as SecurityService).upateProfile(user);\n        this.toastSvc.success('msg.save_successful');\n      }\n\n    )\n  }\n\n  cancel() {\n    this.navCtrl.pop();\n  }\n\n  private generateUniqueFileName(): string {\n    return new Date().getTime().toString() + this.fileSvc.FILE_EXTENSION;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/change-profile/change-profile.ts"],"sourceRoot":""}