{"version":3,"sources":["../../src/pages/vehicle-health-check/vehicle-health-check.module.ts","../../src/pages/vehicle-health-check/vehicle-health-check.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VehicleHealthCheckPage } from './vehicle-health-check';\n// import { HistoryDetailPage } from './vehicle-health-check';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    VehicleHealthCheckPage,\n\n  ],\n  imports: [\n    IonicPageModule.forChild(VehicleHealthCheckPage),\n    TranslateModule.forChild()\n  ],\n  entryComponents:[\n  ]\n})\nexport class VehicleHealthCheckPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicle-health-check/vehicle-health-check.module.ts","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { AlertController, IonicPage, ModalController, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { VehicleItems, Util } from \"../../providers\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { IvtStorageService } from '@ivt/security';\nimport * as moment from 'moment';\nimport { MarkService } from '../../services/mark.service';\nimport { VehicleService } from '../../services/vehicle.service';\nimport { APIResponse } from '@ivt/http-client';\nimport { ToastService } from '../../services/toast.service';\nimport { Mark, DamageTypeEnum } from '../../models/vehicle/mark.model';\nimport { FileService } from '../../services/file.service';\nimport { AxisPosition } from '../../models/position.model';\nimport { VehicleHealthCheckModel, VhcCommentPhotosModel } from '../../models/commentAndPhoto.model';\nimport { VehcileHealthCheckService } from '../../services/commentAndPhoto.service';\nimport { ImageModal } from './imageModal/image-modal';\nimport { VHCService } from '../../services/mark.comment.service';\nimport { CameraService } from '../../services/camera.service';\nimport { Picture } from '../../models/picture.model';\nimport { resolve } from 'path';\nimport { MarkAndComment } from '../../models/vehicle/mark.comment.model';\nimport { HistoryDetailPage } from './history/vhc-history';\nimport { Config } from '../../app/app.config';\n\nimport { _ } from 'underscore';\n/**\n * Generated class for the VehicleHealthCheckPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n\n@IonicPage()\n@Component({\n  selector: 'page-vehicle-health-check',\n  templateUrl: 'vehicle-health-check.html',\n})\n\n\nexport class VehicleHealthCheckPage {\n  Pictures: Picture[] = [];\n  checkDamage: Mark[];\n  vehicleList: any;\n  @ViewChild('canvas') ElementRef\n  @ViewChild('markArea') markArea: ElementRef;\n\n\n\n  vhcPhoto: any;\n  private base64Prefix: string = 'data:image/jpeg;base64,';\n  photos: any = [];\n  history: any;\n  private _CANVAS: any;\n  private _CONTEXT: any;\n  canvasEl: any;\n\n  vhc: VehicleHealthCheckModel;\n  displayDateFormat = Config.date.displayShortTime;\n\n  constructor(\n    public domSanitizer: DomSanitizer,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private camera: CameraService,\n    private alertCtrl: AlertController,\n    public modalCtrl: ModalController,\n    private storageService: IvtStorageService,\n    private elementRef: ElementRef,\n    private util: Util,\n    private markSvc: MarkService,\n    private vehcileHealthCheckService: VehcileHealthCheckService,\n    private fileSvc: FileService,\n    private toastSvc: ToastService,\n    private vehicleSvc: VehicleService,\n    private vhcSvc: VHCService\n  ) {\n    this.vhc = new VehicleHealthCheckModel();\n    this.vhcPhoto = [];\n    this.checkDamage = [];\n    // this.fileSvc.upload('fake', {});\n  }\n  ionViewDidEnter() {\n    this.loadData();\n  }\n  loadData() {\n    this.vehicleSvc.search().subscribe(\n      _items => {\n        this.vehicleList = _items;\n      },\n      (err: APIResponse) => {\n        this.toastSvc.error(err.message);\n      }\n    );\n\n    // this.history = this.storageService.get(\"vhcList\");\n  }\n\n  loadVHCItem(vehicleId: string) {\n    this.loadVhcData(vehicleId);\n  }\n\n  private downloadPhoto(vhcCommentPhotos: VhcCommentPhotosModel[]){\n    vhcCommentPhotos.forEach(item=>{\n      this.fileSvc.download(item.pictureId).then(result=>{\n        this.Pictures.push({id: item.pictureId, url: result})\n      })\n    })\n  }\n  loadVhcData(vehicleId: string) {\n    this.Pictures = [];\n    this.vhc = new VehicleHealthCheckModel();\n    this.vhc.comment =\"\";\n    this.vhc.id = vehicleId;\n    this.vhcSvc.search({ vehicleId: vehicleId }).subscribe((_vhc: any) => {\n      if(_vhc){\n        this.checkDamage = _vhc.mark;\n        this.vhc.comment = _vhc.vhcComment.comment;\n        this.downloadPhoto(_vhc.vhcComment.vhcCommentPhotos)\n        this.history = _vhc.vhcCommentHistory;\n      }\n    },\n      (res: APIResponse) => {\n        console.log(\"Mark error:\", res);\n      }\n    )\n  }\n\n  ngAfterViewInit() {\n    this.elementRef.nativeElement.querySelector('#checkDamageArea')\n      .addEventListener('click', this.checkDamageEvent.bind(this));\n  }\n\n  checkDamageEvent(event) {\n    if(this.vhc.id && event.target.tagName == 'IMG'){\n    let mark = new Mark();\n    mark.id = null;\n    mark.damageType = DamageTypeEnum.Check;\n\n    const position = new AxisPosition();\n    position.XVal = event.offsetX - 9;\n    position.YVal = event.offsetY - 18;\n    mark.position = position;\n\n    this.checkDamage.push(mark);\n    }\n  }\n\n  cancel() {\n    this.navCtrl.pop();\n  }\n\n    submitSave() {\n    this.getVHCPhotoComment().then( result => {\n        let vhcCommentAndPhoto = {\n          comment : this.vhc.comment,\n          vhcCommentPhotos : result\n        }\n        this.vhcSvc.save(\n          {\n            vehicleId: this.vhc.id,\n            mark: this.checkDamage,\n            vhcComment: vhcCommentAndPhoto\n          }\n        ).subscribe(success=>{\n            this.loadVhcData(this.vhc.id);\n        });\n    })\n  }\n  ngOnInit() { }\n  ionViewDidLoad() {\n  }\n  initialiseCanvas(): void {\n    if (this._CANVAS.getContext) {\n      this.setupCanvas();\n    }\n  }\n  setupCanvas(): void {\n    this._CONTEXT = this._CANVAS.getContext('2d');\n    this._CONTEXT.fillStyle = \"#3e3e3e\";\n    this._CONTEXT.fillRect(0, 0, 500, 500);\n  }\n\n  /**\n   * Reset the Canvas element/clear previous content\n   *\n   * @public\n   * @method clearCanvas\n   * @return {none}\n   */\n  clearCanvas(): void {\n    this._CONTEXT.clearRect(0, 0, this._CANVAS.width, this._CANVAS.height);\n    this.setupCanvas();\n  }\n\n  takePhoto() {\n    this.camera.getPicture(200, 200).then(\n      _base64 => {\n        let picture = new Picture();\n        picture.url = _base64;\n        this.Pictures.push(picture);\n        console.log(this.Pictures);\n      }\n    )\n  }\n  private uploadFile(urlBlob) {\n    return this.fileSvc.upload(urlBlob, { mimeType: \".png\" });\n  }\n  private getVHCPhotoComment(): Promise <any> {\n    let lstPictures: any =[];\n    let uploadRequests = [];\n    return new Promise((resolve, reject) => {\n      this.Pictures.forEach(picture => {\n        if (!picture.id) {\n         uploadRequests.push(this.uploadFile(picture.url).then(result => {\n            lstPictures.push({pictureId : result});\n          }))\n        }\n        else {\n          lstPictures.push({pictureId: picture.id});\n        }\n      })\n      Promise.all(uploadRequests).then(_ =>{\n        resolve(lstPictures);\n      })\n    })\n  }\n\n  historyDetail(item) {\n    let profileModal = this.modalCtrl.create(HistoryDetailPage,\n      {\n        item: item    \n      },\n      {\n        cssClass: 'popup-vehicle'\n      }\n    );\n    profileModal.present();\n  }\n\n  scalePosition() {\n    this.checkDamage.forEach((value: Mark, i: number) => {\n      this.checkDamage[i].position.YVal = this.markArea.nativeElement.offsetHeight / 232 * value.position.YVal;\n      this.checkDamage[i].position.XVal = this.markArea.nativeElement.offsetWidth / 309 * value.position.XVal;\n    })\n  }\n  showImageModal(item: Picture) {\n    let profileModal = this.modalCtrl.create(ImageModal, item);\n    profileModal.onDidDismiss(data => {\n      if (data) {\n        if(item.id){\n          this.Pictures = _.reject(this.Pictures,{id: item.id});\n        }\n        else{\n          this.Pictures = _.reject(this.Pictures,{url: item.url});\n        }\n      }\n    });\n    profileModal.present();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicle-health-check/vehicle-health-check.ts"],"sourceRoot":""}