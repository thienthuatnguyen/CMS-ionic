{"version":3,"file":"normalize.js","sourceRoot":"","sources":["../../src/js/normalize.ts"],"names":[],"mappings":";;AAAA,IAAM,aAAa,GAAG,sCAAsC,CAAC;AAE7D,sBAA6B,GAAW,EAAE,WAAmB;IAC3D,OAAO,WAAS,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAG,CAAC;AAC5E,CAAC;AAFD,oCAEC;AAED,uBAA8B,IAAS;IACrC,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;KAC1D;IACD,IAAM,UAAU,GACd,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;IACtE,IAAI,UAAU,EAAE;QACd,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAU;YACnC,IAAI,KAAK,CAAC,QAAQ,KAAK,eAAe,EAAE;gBACtC,KAAK,CAAC,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;aAC9D;QACH,CAAC,CAAC,CAAC;KACJ;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAdD,sCAcC","sourcesContent":["const PATH_STRIP_RE = /^.*\\/[^\\.]+(\\.app|CodePush|.*(?=\\/))/;\n\nexport function normalizeUrl(url: string, pathStripRe: RegExp): string {\n  return `app://${url.replace(/^file\\:\\/\\//, '').replace(pathStripRe, '')}`;\n}\n\nexport function normalizeData(data: any): any {\n  if (data.culprit) {\n    data.culprit = normalizeUrl(data.culprit, PATH_STRIP_RE);\n  }\n  const stacktrace =\n    data.stacktrace || (data.exception && data.exception[0].stacktrace);\n  if (stacktrace) {\n    stacktrace.frames.forEach((frame: any) => {\n      if (frame.filename !== '[native code]') {\n        frame.filename = normalizeUrl(frame.filename, PATH_STRIP_RE);\n      }\n    });\n  }\n  return data;\n}\n"]}